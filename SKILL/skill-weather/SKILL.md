---
name: weather
description: 天气查询工作流，指导如何调用天气 API 并格式化天气信息
triggers:
  - 天气查询
  - 天气预报
  - 气象信息
version: 1.0.0
---

# Weather Skill

这个 skill 指导你如何查询天气信息并按照标准格式输出。

## 可用工具

如果系统中有以下工具，优先使用：
- `weather__get_current`: 获取当前天气
- `weather__get_forecast`: 获取天气预报
- `fetch__get`: 调用天气 API

如果没有专用工具，可以提供通用建议。

## 工作流程

### 1. 解析用户请求
识别：
- 城市名称
- 时间范围（今天、明天、未来一周）
- 关注的信息（温度、降雨、空气质量等）

### 2. 调用天气工具（如果可用）
```
如果有 weather 工具:
  → 调用 weather__get_current(city)
  → 获取实时数据

如果有 fetch 工具:
  → 调用 fetch__get(weather_api_url)
  → 解析返回的 JSON 数据

如果没有工具:
  → 告知用户无法获取实时数据
  → 提供通用天气建议
```

### 3. 格式化输出
使用以下标准格式：

```
🌤️ 天气信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 城市: {城市名}
📅 日期: {日期}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🌡️ 温度: {温度}°C
☁️ 天气: {天气状况}
💨 风力: {风力等级}
💧 湿度: {湿度}%
🌫️ 空气质量: {AQI 指数}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 出行建议: {根据天气给出的建议}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 使用示例

### 示例 1: 查询当前天气

**用户**: 北京今天天气怎么样？

**步骤**:
1. 识别城市：北京
2. 调用天气工具（如果可用）
3. 格式化输出:

```
🌤️ 天气信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 城市: 北京
📅 日期: 2026年2月25日
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🌡️ 温度: 5°C
☁️ 天气: 晴
💨 风力: 3级（微风）
💧 湿度: 45%
🌫️ 空气质量: 良（AQI 85）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 出行建议: 天气晴朗，温度适中，适合外出活动。
建议穿着轻薄外套。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 示例 2: 未来天气预报

**用户**: 上海未来三天天气

**步骤**:
1. 识别城市：上海
2. 识别时间范围：未来三天
3. 调用 `weather__get_forecast(city="上海", days=3)`
4. 格式化输出:

```
🌤️ 天气预报
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 城市: 上海
📅 预报时间: 未来 3 天
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📆 2月26日（周四）
  🌡️ 12°C ~ 18°C  ☁️ 多云  💧 60%

📆 2月27日（周五）
  🌡️ 10°C ~ 16°C  🌧️ 小雨  💧 75%

📆 2月28日（周六）
  🌡️ 8°C ~ 14°C   ☁️ 阴    💧 65%

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 出行建议: 周五有降雨，出门记得带伞。
气温逐渐下降，注意保暖。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 输出格式规范

### 必须包含的元素
1. **标题**: 🌤️ 天气信息 或 🌤️ 天气预报
2. **分隔线**: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
3. **基本信息**: 城市、日期
4. **天气数据**: 温度、天气状况、风力、湿度等
5. **出行建议**: 根据天气给出实用建议

### 图标使用规范
- 🌡️ 温度
- ☀️ 晴天
- ☁️ 多云
- 🌧️ 雨天
- ⛈️ 雷雨
- 🌨️ 雪天
- 💨 风力
- 💧 湿度
- 🌫️ 雾霾/空气质量

## 无工具时的处理

如果没有天气 API 工具，应该：

1. 明确告知用户无法获取实时数据
2. 提供通用的天气建议
3. 推荐专业天气应用

**示例输出**:
```
⚠️ 提示: 当前无法获取实时天气数据

💡 建议:
- 使用专业天气应用（如中国天气、墨迹天气）
- 访问天气网站获取准确信息
- 关注当地气象部门发布的预报
```

## 注意事项

1. **数据时效性**: 如果有时间戳，显示数据更新时间
2. **单位统一**: 温度使用摄氏度（°C），风速使用等级或 km/h
3. **准确性声明**: 如果是模拟数据，必须明确说明
4. **安全提示**: 极端天气时给出安全建议
